import streamlit as st

st.set_page_config(page_title="Î‘Î¸Î»Î·Ï„Î¹ÎºÎ® Î”Î¹Î±Ï„ÏÎ¿Ï†Î® AI", page_icon="ğŸ’ª", layout="centered")

st.title("ğŸ½ï¸ Î‘Î¸Î»Î·Ï„Î¹ÎºÎ® Î”Î¹Î±Ï„ÏÎ¿Ï†Î® â€“ Î ÏÎ¿ÏƒÎ±ÏÎ¼Î¿ÏƒÎ¼Î­Î½Î¿Ï‚ Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚")

with st.sidebar:
    st.header("ğŸ“¥ Î•Î¹ÏƒÎ±Î³Ï‰Î³Î® Î”ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½")

    gender = st.selectbox("Î¦ÏÎ»Î¿", ["Î†Î½Î´ÏÎ±Ï‚", "Î“Ï…Î½Î±Î¯ÎºÎ±"])
    age = st.number_input("Î—Î»Î¹ÎºÎ¯Î±", min_value=10, max_value=80, value=25)
    height = st.number_input("ÎÏˆÎ¿Ï‚ (cm)", value=180)
    weight = st.number_input("Î’Î¬ÏÎ¿Ï‚ (kg)", value=75.0)

    phase = st.selectbox("Î¦Î¬ÏƒÎ· Î ÏÎ¿Ï€ÏŒÎ½Î·ÏƒÎ·Ï‚", ["Î‘Î³Ï‰Î½Î¹ÏƒÏ„Î¹ÎºÎ®", "Î ÏÎ¿Ï€Î¿Î½Î·Ï„Î¹ÎºÎ®", "Î—ÏÎµÎ¼Î¯Î±"])
    goal = st.selectbox("Î£Ï„ÏŒÏ‡Î¿Ï‚", ["Î‘ÏÎ¾Î·ÏƒÎ· Î¼Ï…ÏŠÎºÎ®Ï‚ Î¼Î¬Î¶Î±Ï‚", "Î£Ï…Î½Ï„Î®ÏÎ·ÏƒÎ·", "Î‘Ï€ÏÎ»ÎµÎ¹Î± Î»Î¯Ï€Î¿Ï…Ï‚"])
    training_hours = st.slider("ÎÏÎµÏ‚ Ï€ÏÎ¿Ï€ÏŒÎ½Î·ÏƒÎ·Ï‚/Î·Î¼Î­ÏÎ±", 0.0, 6.0, 1.0)

st.subheader("ğŸ“Š Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼Î­Î½Î± Î‘Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î±:")

# BMR Calculation (Mifflin-St Jeor)
if gender == "Î†Î½Î´ÏÎ±Ï‚":
    bmr = 10 * weight + 6.25 * height - 5 * age + 5
else:
    bmr = 10 * weight + 6.25 * height - 5 * age - 161

# Activity multiplier by phase
activity_multiplier = {
    "Î—ÏÎµÎ¼Î¯Î±": 1.3,
    "Î ÏÎ¿Ï€Î¿Î½Î·Ï„Î¹ÎºÎ®": 1.6 + 0.1 * training_hours,
    "Î‘Î³Ï‰Î½Î¹ÏƒÏ„Î¹ÎºÎ®": 1.75 + 0.15 * training_hours,
}[phase]

calories = bmr * activity_multiplier

# Macronutrient logic
protein_factor = {
    "Î‘ÏÎ¾Î·ÏƒÎ· Î¼Ï…ÏŠÎºÎ®Ï‚ Î¼Î¬Î¶Î±Ï‚": 2.0,
    "Î£Ï…Î½Ï„Î®ÏÎ·ÏƒÎ·": 1.6,
    "Î‘Ï€ÏÎ»ÎµÎ¹Î± Î»Î¯Ï€Î¿Ï…Ï‚": 1.8
}[goal]
protein = weight * protein_factor

fat = weight * 1.0
fat_cal = fat * 9
protein_cal = protein * 4
remaining_cal = calories - (protein_cal + fat_cal)
carbs = max(remaining_cal / 4, 0)

# Results
st.markdown(f"**ğŸ”¥ Î˜ÎµÏÎ¼Î¯Î´ÎµÏ‚:** {int(calories)} kcal / Î·Î¼Î­ÏÎ±")
st.markdown(f"**ğŸ¥© Î ÏÏ‰Ï„ÎµÎÎ½Î·:** {int(protein)} g")
st.markdown(f"**ğŸš Î¥Î´Î±Ï„Î¬Î½Î¸ÏÎ±ÎºÎµÏ‚:** {int(carbs)} g")
st.markdown(f"**ğŸ¥‘ Î›Î¯Ï€Î¿Ï‚:** {int(fat)} g")

# Contextual Tips
st.subheader("ğŸ’¡ Î£Ï…Î¼Î²Î¿Ï…Î»Î­Ï‚ Î‘Î½Î¬ Î¦Î¬ÏƒÎ·:")
if phase == "Î‘Î³Ï‰Î½Î¹ÏƒÏ„Î¹ÎºÎ®":
    st.info("ğŸ“Œ Î•ÏƒÏ„Î¯Î±ÏƒÎµ ÏƒÎµ Ï…ÏˆÎ·Î»Î¿ÏÏ‚ Ï…Î´Î±Ï„Î¬Î½Î¸ÏÎ±ÎºÎµÏ‚ & post-training Î±Ï€Î¿ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·. Î‘Ï…Î¾Î·Î¼Î­Î½Î· Î±Î½Î¬Î³ÎºÎ· ÏƒÎµ Î·Î»ÎµÎºÏ„ÏÎ¿Î»ÏÏ„ÎµÏ‚.")
elif phase == "Î ÏÎ¿Ï€Î¿Î½Î·Ï„Î¹ÎºÎ®":
    st.info("ğŸ“Œ Î£Ï„Î±Î¸ÎµÏÎ® Ï€ÏÏ‰Ï„ÎµÎÎ½Î· & Î¼Î­Ï„ÏÎ¹Î¿Î¹ Ï…Î´Î±Ï„Î¬Î½Î¸ÏÎ±ÎºÎµÏ‚. Î•Î½Î¯ÏƒÏ‡Ï…ÏƒÎµ Î¼Î¹ÎºÏÎ¿Î¸ÏÎµÏ€Ï„Î¹ÎºÎ¬ Î³Î¹Î± Î±Ï€Î¿ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·.")
else:
    st.info("ğŸ“Œ ÎœÎµÎ¯Ï‰ÏƒÎµ ÏƒÏ…Î½Î¿Î»Î¹ÎºÎ­Ï‚ Î¸ÎµÏÎ¼Î¯Î´ÎµÏ‚ & Î­Î¼Ï†Î±ÏƒÎ· ÏƒÎµ Î±Î½Ï„Î¹Î¿Î¾ÎµÎ¹Î´Ï‰Ï„Î¹ÎºÎ¬ â€“ Ï†Î¬ÏƒÎ· Î±Ï€Î¿Ï†ÏŒÏÏ„Î¹ÏƒÎ·Ï‚.")

st.markdown("---")
st.caption("Â© 2025 Î‘Î¸Î»Î·Ï„Î¹ÎºÎ® Î”Î¹Î±Ï„ÏÎ¿Ï†Î® AI by ÎœÎ¬ÏÎ¹Î¿Ï‚")
